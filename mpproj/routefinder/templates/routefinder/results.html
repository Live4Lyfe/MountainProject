<!DOCTYPE html>
{% load static %}
<html>
    <head>
        <meta charset="UTF-8">
        <title>Results</title>
        <link rel='stylesheet' type="text/css" href="{% static 'routefinder/style.css' %}">
        <script src="{% static 'routefinder/index.js' %}"></script>
    </head>
    <body>
        <div id="results">
            <div id="center-col">
                {% if best_routes is not None %}
                    {% for route in best_routes %}
                        <div class="route">
                            <a href="{% url 'routefinder:route' route.id %}">
                                <div class="route-name">
                                    <h4>
                                        {{route.name}} -- {{route.bayes}} / 4
                                    </h4>
                                </div>
                            </a>
                            <div class="route-information">
                                <div class="basics">
                                    <h3>
                                        <span>A</span>
                                        {% if route.pitches > 0 %}
                                            <span id="route-pitches">
                                                {{ route.pitches|floatformat:"0" }} pitch
                                            </span>
                                        {% elif route.length > 0 %}
                                            <span id="route-length">
                                                {{route.length|floatformat:"0"}}-foot long
                                            </span>
                                        {% endif %}

                                        {% for system, grade in route.rope_grades.items %}
                                            {% if grade is not None %}
                                                <span class="{{system}}" onclick="NextSystem(this, 'rope');">
                                                    <label>{{grade}} </label>
                                                </span>
                                            {% endif %}
                                        {% endfor %}
                                        {% for system, grade in route.boulder_grades.items %}
                                            {% if grade is not None %}
                                                <span class="{{system}}" onclick="NextSystem(this, 'boulder');">
                                                    <label>{{grade}} </label>
                                                </span>
                                            {% endif %}
                                        {% endfor %}

                                        {% if route.mixed_rating is not None %}
                                            <span class="misc-grade" id="{{grade}}">
                                                {{route.mixed_rating}}
                                            </span>
                                        {% endif %}

                                        {% if route.aid_rating is not None %}
                                            <span class="misc-grade" id="{{grade}}">
                                                {{route.aid_rating}}
                                            </span>
                                        {% endif %}

                                        {% if route.snow_rating is not None %}
                                            <span class="misc-grade" id="{{grade}}">
                                                {{route.snow_rating}}
                                            </span>
                                        {% endif %}

                                        {% if route.ice_rating is not None %}
                                            <span class="misc-grade" id="{{grade}}">
                                                {{route.ice_rating}}
                                            </span>
                                        {% endif %}

                                        <span>
                                            {{route.terrain}} {{route.style}} route
                                        </span>

                                        {% if route.danger_conv > 0 %}
                                            <span id="route-danger">
                                                ({{ route.danger_rating }})
                                            </span>
                                        {% endif %}

                                        {% if route.nccs_conv > 0 %}
                                            <span>
                                                (NCCS: {{route.nccs_rating }})
                                            </span>
                                        {% endif %}

                                        <span>
                                            {% if route.area_counts > 1 %}
                                                near {{route.area_counts}} similar routes.
                                            {% elif route.area_counts == 1 %}
                                                near 1 similar route.
                                            {% endif %}
                                        </span>
                                    </h3>
                                </div>
                                <div class="route-location">
                                    {{route.distance|floatformat:"0"}} miles away.
                                </div>    
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
        <!-- {% if best_routes is not None %}
            {% for route in best_routes %}
                <p class="route">
                    <h1><a href="{% url 'routefinder:route' route.id %}">{{ route.name }}</a></h1>
                    <p>{{ route.bayes }} -- {{ route.style }} -- {{ route.grade }} -- {{ route.features }} -- {{ route.area_group }}</p>
                </section>
                {% endfor %}
        {% else %}
            <p>No routes fit that description</p>
            {% endif %} -->
        <footer>
            <nav class="primary-footer">
                <ul>
                    <li><a href="{% url 'routefinder:search' %}">Search</a></li><!--
                    --><li><a href="{% url 'routefinder:browse' %}">Browse</a></li>
                </ul>
            </nav>
        </footer>
    </body>
</html>