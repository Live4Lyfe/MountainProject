<!DOCTYPE html>
{% load static %}
<html>
    <head>
        <meta charset="UTF-8">
        <title>{{ route.name }}</title>
        <link rel='stylesheet' type="text/css" href="{% static 'routefinder/style.css' %}">
        <script src="{% static 'routefinder/index.js' %}"></script>
    </head>
    <body>
        <header class="primary-header">
            <nav class="area-nav">
                {% for area in areas %}
                    <a href="{{ area.url }}">
                        {% if not forloop.first %}<span> > </span> {% endif %}
                        <span>{{area.name}}<span>
                    </a>
                {% endfor %}
            </nav>
        </header>
        <section class="main">
            <div id="area-routes">
                <div id="area-routes-title">
                    {% with areas|last as area %}
                        <h4>Other Routes in {{ area.name }}</h4>
                    {% endwith %}
                </div>
                <ul id="area-routes-list"  class="scroll">
                    {% for area_route in area_routes %}
                        <li><a href="{% url 'routefinder:route' area_route.id %}">{{ area_route.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            <div id="route-info">
                <div id="route-text">
                    <a href="{{route.url}}"><h5 id="route-name">
                        {{ route.name }}
                    </h5></a>
                    <h3 id="route-data">
                        <span>A </span>
                        {% if route.pitches > 0 %}
                            <span id="route-pitches">
                                {{ route.pitches|floatformat:"0" }} pitch 
                            </span>
                        {% endif %}
                        {% for system, grade in grades.items %}
                            {% if system not in sport_systems and system not in boulder_systems %}
                                <span id="{{ system }}" class="singular-grade">
                                    {{ grade }}
                                </span>
                            {% elif system in sport_systems %}
                                <span id="{{ system }}" class="rope-grades">
                                    {{ grade }} {% if grade in "['3rd', '4th']" %} class {% endif %}
                                </span>
                                {% elif system in boulder_systems %}
                                <span id="{{ system }}" class="boulder-grades">
                                    {{ grade }}
                                </span>
                            {% endif %}
                        {% endfor %}

                        {% for style in styles %}
                            {% if forloop.last and forloop.first %}
                                <span id="{{ style }}" class="route-style">
                                    {{ style }}
                                </span>
                            {% elif not forloop.last and forloop.first %}
                                <span id="{{ style }}" class="route-style">
                                    {{ style }}
                                </span>
                            {% elif not forloop.last %}
                                <span id="{{ style }}" class="route-style">
                                    , {{ style }}
                                </span>
                            {% else %}
                                <span id="{{ style }}" class="route-style">
                                    and {{ style }}
                                </span>
                            {% endif %}
                        {% endfor %}

                        <span>
                            route
                        </span>

                        {% if route.danger_conv > 0 %}
                            <span id="route-danger">
                                ({{ route.danger_rating }})
                            </span>
                        {% endif %}

                        {% if route.nccs_conv > 0 %}
                            <span>
                                (NCCS: {{route.nccs_rating }})
                            </span>

                        {% endif %}
                    </h3>
                    <div id="grade-buttons">
                        {% for system, grade in grades.items %}
                            {% if system in sport_systems %}
                                <label for="{{ system }}-radio">
                                    <input type="radio" id="{{ system }}-radio" name="rope-systems" value="{{ grade }}"
                                        onchange="ToggleSystem('{{ system }}', 'rope-grades');">
                                    <span class="rope-type" id="{{ system }}-label">
                                        {{ system }}
                                    </span>
                                </label>

                            {% elif system in boulder_systems %}
                                <label for="{{ system }}-radio">
                                    <input type="radio" id="{{ system }}-radio" name="boulder-systems" value="{{ grade }}"
                                        onchange="ToggleSystem('{{ system }}', 'boulder-grades');">
                                    <span class="boulder-type" id="{{ system }}-label">
                                        {{ system }}
                                    </span>
                                </label>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>

                <div id="terrain-images">
                    <div class="terrain-image-container">
                        <img src="{% static 'images/arete.gif' %}" class="terrain-image" style="opacity: {{terrain_val.arete}};" />
                        <div class="middle">
                            <div class="text">
                                <h1>{{ terrain.arete }} arete features</h1>
                            </div>
                        </div>
                    </div><!--
                 --><div class="terrain-image-container">
                        <img src="{% static 'images/slab.gif' %}" class="terrain-image" style="opacity: {{terrain_val.slab}};"/>
                        <div class="middle">
                            <div class="text">
                                <h1>{{ terrain.slab }} slab features</h1>
                            </div>
                        </div>
                    </div><!--
                 --><div class="terrain-image-container">
                        <img src="{% static 'images/chimney.gif' %}" class="terrain-image" style="opacity: {{terrain_val.chimney}};"/>
                        <div class="middle">
                            <div class="text">
                                <h1> {{ terrain.chimney }} chimney features</h1>
                            </div>
                        </div>
                    </div><!--
                 --><div class="terrain-image-container">
                        <img src="{% static 'images/overhang.gif' %}" class="terrain-image" style="opacity: {{terrain_val.overhang}};"/>
                        <div class="middle">
                            <div class="text">
                                <h1>{{ terrain.overhang }} overhang features</h1>
                            </div>
                        </div>
                    </div><!--
                 --><div class="terrain-image-container">
                        <img src="{% static 'images/crack.gif' %}" class="terrain-image" style="opacity: {{terrain_val.crack}};"/>
                        <div class="middle">
                            <div class="text">
                                <h1>{{ terrain.crack }} crack features</h1>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="map"></div>
                <script async defer src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLE_KEY }}&callback=initMap"></script>
            </div>
            <div id="similar-routes">
                <div id="similar-routes-title">
                    <h4>Similar routes to {{ route.name }}</h4>
                </div>
                <ul id="similar-routes-list"  class="scroll">
                    {% for similar_route in similar_routes %}
                        <li><a href="{% url 'routefinder:route' similar_route.id %}">{{ similar_route.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        </section>
        <footer>
            <nav class="primary-footer">
                <ul>
                    <li><a href="{% url 'routefinder:search' %}">Search</a></li><!--
                    --><li><a href="{% url 'routefinder:browse' %}">Browse</a></li>
                </ul>
            </nav>
        </footer>
    </body>
</html>